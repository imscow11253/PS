# [Gold III] 동방 프로젝트 (Large) - 14595 

[문제 링크](https://www.acmicpc.net/problem/14595) 

### 성능 요약

메모리: 2160 KB, 시간: 0 ms

### 분류

자료 구조, 분리 집합, 정렬, 스위핑

### 제출 일자

2024년 9월 26일 14:56:27

### 문제 설명

<p>동아리방이 가지고 싶었던 병찬이는 LINK 사업단에 문의하여 N개의 방 중의 하나를 얻을 기회를 얻었다. 일자로 되어있는 건물에 N개의 방은 일직선상에 존재하며, 각 방에는 번호가 매겨져 있다. 맨 왼쪽 방의 번호는 1번이며, 순서대로 증가하여 맨 오른쪽 방의 번호가 N번이다. 각 방 사이에는 방을 구분하는 벽이 존재한다.</p>

<p>물론 병찬이 외에도 많은 사람이 동아리방을 원한다. 다행히 방은 충분했기에 병찬이는 안심하고 있었지만…</p>

<p>그때였다.</p>

<p>빅-종빈빌런이 나타나 건물 벽을 허물기 시작한 것이다! 빅-종빈빌런은 다음과 같은 규칙으로 벽을 무너뜨린다.</p>

<ul>
	<li>x < y 를 만족하는 두 방에 대해서 x번 방부터 y번 방 사이에 있는 모든 벽을 허문다.</li>
	<li>두 방 사이의 벽이 허물어지면 두 방은 하나의 방으로 합쳐진다.</li>
	<li>이미 허물어진 벽이 존재한다면 무시하고 다음 벽을 허문다.</li>
	<li>빅-종빈빌런은 건물이 무너지는 걸 원치 않기 때문에, 1번 방의 왼쪽 벽과 N번 방의 오른쪽 벽(즉, 바깥과 연결된 벽)은 허물지 않는다.</li>
</ul>

<p>동아리 방의 개수가 점점 줄어들자 병찬이는 초조해졌다. 이에 병찬이는 동아리방을 얻을 수 있는지에 대한 확률을 계산하기 위해 남는 동아리방의 수를 구하고 싶어 한다. 병찬이를 위해 빅-종빈빌런의 행동 횟수 M과 동방의 개수 N이 주어졌을 때, 남은 동아리방의 수를 구해주자.</p>

### 입력 

 <p>첫 번째 줄에는 동아리방의 개수를 나타내는 양의 정수 N(2 ≤ N ≤ 1,000,000) 이 주어진다. 두 번째 줄에는 빅-종빈빌런의 행동 횟수를 나타내는 음이 아닌 정수 M(0 ≤ M ≤ 5,000) 이 주어진다. 세 번째 줄부터 M개의 줄에 걸쳐 빅-종빈빌런의 행동이 양의 정수 x, y(1 ≤ x < y ≤ N) 로 주어진다. 여기서 행동이란 x번 방부터 y번 방 사이의 벽을 무너뜨리는 것을 의미한다.</p>

<p>빅-종빈빌런은 매우 허당이기 때문에 동일한 행동을 여러 번 할 수 있음에 유의하라.</p>

### 출력 

 <p>빅-종빈빌런의 모든 행동이 끝난 후 남아있는 동방의 개수를 한 줄에 출력한다.</p>

 ### 풀이 

 <p>골드 3 문제라고 해서 좀 겁먹었는데 의외로 엄청 쉬웠던 문제였다. 문제를 찬찬히 읽고 이런 식으로 접근하면 되겠다~ 생각하고 그대로 풀면 된다. 

우선 naive하게 하면 O(n*m) 이 나와서 시간초과 날 것이다. 그래서 문제의 핵심을 파악하려고 했다. 

처음에는 방마다 아이디 값을 부여해서 하려고 했다. 각 쿼리마다 방의 아이디를 같도록 update해주면 되겠지 싶었는데 그러면 navie하게 푸는 것과 다를 바가 없다. 아니, 그냥 이 방법이 naive한 방법이다. 

그래서 특정 구간의 값을 logn으로 update하는 자료구조가 있나 생각해봤지만 없는 것 같았다. 

그래서 쿼리를 합쳐보기로 했다. 쿼리를 정렬하고 겹치는 구간을 하나로 합치면 O(n)으로 풀 수 있을 것 같아서 그렇게 했는데 풀렸다. 

한 번에 풀려서 놀랐다.</p>

