# [Gold II] 게임 - 1103 

[문제 링크](https://www.acmicpc.net/problem/1103) 

### 성능 요약

메모리: 2048 KB, 시간: 0 ms

### 분류

다이나믹 프로그래밍, 그래프 이론, 그래프 탐색, 깊이 우선 탐색

### 제출 일자

2025년 12월 31일 23:28:44

### 문제 설명

<p>형택이는 1부터 9까지의 숫자와, 구멍이 있는 직사각형 보드에서 재밌는 게임을 한다.</p>

<p>일단 보드의 가장 왼쪽 위에 동전을 하나 올려놓는다. 그다음에 다음과 같이 동전을 움직인다.</p>

<ol>
	<li>동전이 있는 곳에 쓰여 있는 숫자 X를 본다.</li>
	<li>위, 아래, 왼쪽, 오른쪽 방향 중에 한가지를 고른다.</li>
	<li>동전을 위에서 고른 방향으로 X만큼 움직인다. 이때, 중간에 있는 구멍은 무시한다.</li>
</ol>

<p>만약 동전이 구멍에 빠지거나, 보드의 바깥으로 나간다면 게임은 종료된다. 형택이는 이 재밌는 게임을 되도록이면 오래 하고 싶다.</p>

<p>보드의 상태가 주어졌을 때, 형택이가 최대 몇 번 동전을 움직일 수 있는지 구하는 프로그램을 작성하시오.</p>

### 입력 

 <p>줄에 보드의 세로 크기 N과 가로 크기 M이 주어진다. 이 값은 모두 50보다 작거나 같은 자연수이다. 둘째 줄부터 N개의 줄에 보드의 상태가 주어진다. 쓰여 있는 숫자는 1부터 9까지의 자연수 또는 H이다. 가장 왼쪽 위칸은 H가 아니다. H는 구멍이다.</p>

### 출력 

 <p>첫째 줄에 문제의 정답을 출력한다. 만약 형택이가 동전을 무한번 움직일 수 있다면 -1을 출력한다.</p>


### 풀이 

 <p>처음엔 단순하게 bfs 문제인줄 알고 풀었다. 근데 방문처리 때문에 무한루프가 안되는데 되는 것처럼 나오는 엣지 케이스가 존재했고, visit 2차원 배열을 queue의 요소로 포함해서 넣었는데 복사연산자 때문인지 시간초과가 떴다. bfs에서 시간초과 나면 dp다. 그래서 집합 나누기를 했다. 특정 셀에서의 최대 이동 횟수는 상하좌우 이동할 수 있는 칸의 dp 값 + 1 의 max 를 취하면 된다. 근데 무한루프를 고려해야 하니 방문한 경우면 -1을 출력해야 한다. 근데 각 branch마다 방문한 셀을 다르게 표시해야 하므로 백트래킹도 넣었다. 즉 이 문제는 백트래킹 + dp + dfs 느낌의 문제였다. 차분히 생각해서 스스로 풀었다. GPT 안씀 </p>

