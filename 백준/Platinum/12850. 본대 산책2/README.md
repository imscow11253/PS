# [Platinum V] 본대 산책2 - 12850 

[문제 링크](https://www.acmicpc.net/problem/12850) 

### 성능 요약

메모리: 2024 KB, 시간: 0 ms

### 분류

수학, 그래프 이론, 분할 정복을 이용한 거듭제곱

### 제출 일자

2025년 7월 20일 17:40:31

### 문제 설명

<p>숭실 대학교 정보 과학관은 유배를 당해서  캠퍼스의 길 건너편에 있다. 그래서 컴퓨터 학부 학생들은 캠퍼스를 ‘본대’ 라고 부르고 정보 과학관을 ‘정보대’ 라고 부른다. 준영이 또한 컴퓨터 학부 소속 학생이라서 정보 과학관에 박혀있으며 항상 꽃 이 활짝 핀 본 대를 선망한다. 어느 날 준영이는 본 대를 산책하기로 결심하였다. 숭실 대학교 캠퍼스 지도는 아래와 같다.</p>

<p style="text-align: center;"><img alt="" src="https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/12850/1.png" style="height:644px; width:940px"></p>

<p style="text-align: center;">(편의 상 문제에서는 위 건물만 등장한다고 가정하자)</p>

<p>한 건물에서 바로 인접한 다른 건물로 이동 하는 데 1분이 걸린다. 준영이는 산책 도중에 한번도 길이나 건물에 멈춰서 머무르지 않는다. 준영이는 할 일이 많아서 딱 D분만 산책을 할 것이다. (산책을 시작 한 지 D분 일 때, 정보 과학관에 도착해야 한다.) 이때 가능한 경로의 경우의 수를 구해주자.</p>

### 입력 

 <p>D 가 주어진다 (1 ≤ D ≤ 1,000,000,000) </p>

### 출력 

 <p>가능한 경로의 수를 1,000,000,007로 나눈 나머지를 출력한다.</p>

 ### 풀이 

 <p>딱봐도 dp 문제인 것 같았는데 d의 범위가 10^9라서 메모리초과, 시간초과 날 것 같았다. 비트마스킹을 이용한 dp인가 고민했는데 그것도 아닌 것 같았다. 결국 모르겠어서 태그를 보니 '수학' 태그와 '분할정복을 이용한 거듭제곱' 태그가 있길래 깔끔하게 포기하고 풀이를 찾아보았다. 행렬의 제곱 문제였다. 그래프를 인접 행렬로 표현할 수 있다. 그러면 1번의 이동으로 도달할 수 있는 노드를 표현할 수 있다. 근데 해당 행렬을 기존 행렬로 곱하면 무슨 뜻일까? A행렬에 A행렬을 곱한 A^2는 의미가 2번의 이동으로 도달할 수 있는 노드를 표현한 것이다. 그럼 A^3은 3번의 이동으로 도달할 수 있는 노드라는 의미를 가지게 된다. 근데 행렬의 크기를 n이라고 하면 행렬을 곱하는 연산은 n^3이다. 즉 여기서는 행렬의 크기가 8*8이므로 행렬의 곱셈에 8*8*8 복잡도를 가지는데 d만큼 곱하면 시간초과가 난다. 이때 제곱수를 사용하는 것이다. A^13이라면 A^1 * A^4 * A^8 로 표현이 가능하다. 즉 2의 거듭제곱으로 모든 수가 표현이 가능하다는 것이고 2의 거듭제곱한 행렬의 연산만 구하면 되니까 logn 의 계산만으로 모든 행렬의 곱셈수를 표현할 수 있는 것이다. 연산을 하는 법은 코드를 뜯어보도록 하자. 행렬의 제곱이 의미하는 바와 이걸 구현하는 법을 외워두면 ps 할 때 좋을 것 같다. </p>

